/* SPDX-License-Identifier: GPL-2.0 */

#ifndef __MEMMAP_H__
#define __MEMMAP_H__

#define MAX_TPU_NUM			8

#define DDR_BASE_ADDR_PHYS		0x0
#define SHMEM_BASE_ADDR_PHYS		0x1ef8000000
#define TOP_BASE_ADDR_PHYS		0x7050000000
#define TPU_SYS_BASE_ADDR_PHYS		0x6900000000
#define VC_SYS_BASE_ADDR_PHYS		0x6B00000000
#define AP_PLIC_MTLI_CFG		0x6e10000000
#define CLINT_BASE_ADDR			0x6840000000
#define CLINT_MHART_ID			0x4001000
#define C2C_SYS0_BASE_ADDR_PHYS	0x6c00000000
#define C2C_SYS1_BASE_ADDR_PHYS	0x6c02000000
#define CXP_SYS_BASE_ADDR_PHYS	0x6c08000000
#define SRAM_BASE_ADDR_PHYS		0x7010000000

#define GP_REG_BASE_ADDR_OFFSET		0x1c0
#define GP_REG_FW_STATUS		9
#define GP_REG_FW_MODE			13
#define LAST_INI_REG_VAL		0x76125438

#define PAGE_SIZE			4096
#define MMAP_DDR_LEN			(128*1024*1024*1024UL) // 128G
#define MMAP_TOP_LEN			0x8000
#define MMAP_TPU_SYS_LEN		0x100000000 // 4G
#define MMAP_VC_SYS_LEN			0x8000000 // 128M
#define MMAP_MSG_FIFO_LEN		(MSG_FIFO_SIZE * 20)
#define MMAP_AP_PLIC_MTLI_LEN		0x2000
#define MMAP_CLINT_LEN			(128 * 1024 * 1024)
#define MMAP_C2C_SYS_LEN		(0x2000000)
#define MMAP_CXP_SYS_LEN		(0x2000000)
#define MMAP_SRAM_LEN			(0x200000)
#define CORE_OFFSET_BIT			28
#define CORE_OFFSET			(1ull << CORE_OFFSET_BIT) // 0x10000000

#define BD_ENGINE_BASE_ADDR		(0x6908000000 + TPU_CORE_ID * CORE_OFFSET)
#define BD_ENGINE_BASE_ADDR_AHB		(BD_ENGINE_BASE_ADDR)
#define BD_ENGINE_MAIN_CTRL_AHB		(BD_ENGINE_BASE_ADDR_AHB + 0x100)

#define TPU_SYS_REG_BASE_ADDR		(0x6908050000 + TPU_CORE_ID * CORE_OFFSET)
#define TPU_SYS_CLK			(TPU_SYS_REG_BASE_ADDR + 0x0)
#define TPU_SYS_RESET			(TPU_SYS_REG_BASE_ADDR + 0x4)
#define TPU_SYS_L2M_CFG_CTRL_OFFSET	0x260
#define TPU_SYS_HNF_L2M_CTRL_OFFSET	0x27c


//msg fifo
#define MSG_FIFO_SIZE_SHIFT		20
#define MSG_FIFO_SIZE			(1 << MSG_FIFO_SIZE_SHIFT) // 8K: 0x2000
#define MSG_FIFO_RX_WP_OFFSET		(0x00 + (0xc0 * (TPU_CORE_ID * 2 + 2)))
#define MSG_FIFO_RX_RP_OFFSET		(0x40 + (0xc0 * (TPU_CORE_ID * 2 + 2)))
#define MSG_FIFO_RX_PHYS_ADDR_OFFSET	(0x80 + (0xc0 * (TPU_CORE_ID * 2 + 2)))
#define MSG_FIFO_TX_WP_OFFSET		(0x00 + (0xc0 * (TPU_CORE_ID * 2 + 3)))
#define MSG_FIFO_TX_RP_OFFSET		(0x40 + (0xc0 * (TPU_CORE_ID * 2 + 3)))
#define MSG_FIFO_TX_PHYS_ADDR_OFFSET	(0x80 + (0xc0 * (TPU_CORE_ID * 2 + 3)))
#define MSG_FIFO_BODY_OFFSET		(0x100000)
#define MSG_FIFO_RX_BASE_OFFSET		(MSG_FIFO_BODY_OFFSET + ((TPU_CORE_ID * 2 + 2) * MSG_FIFO_SIZE))
#define MSG_FIFO_TX_BASE_OFFSET		(MSG_FIFO_BODY_OFFSET + ((TPU_CORE_ID * 2 + 3) * MSG_FIFO_SIZE))

#endif